# 52-Week High Strategy Artifact

**Config**: 52wk High 80/70%/59%
**Generated**: 2025-12-29
**Source**: YOLO Sweep Session

## Strategy Overview

This is a **52-Week High** (momentum breakout) strategy that identifies stocks trading near their period highs and exits when they fall significantly below.

### Parameters
| Parameter | Value | Description |
|-----------|-------|-------------|
| period | 80 | Lookback period for computing rolling high |
| entry_pct | 0.70 (70%) | Enter when close >= 70% of period high |
| exit_pct | 0.59 (59%) | Exit when close < 59% of period high |

### Logic
- **Entry**: When the current close is at or above 70% of the 80-day high, the stock is showing strength near highs - enter long
- **Exit**: When the current close falls below 59% of the 80-day high, the uptrend has broken down - exit position

## Performance Summary (from YOLO sweep)

| Metric | Value |
|--------|-------|
| Avg Sharpe | 0.583 |
| OOS Sharpe | 0.58 |
| Min Sharpe | -0.111 |
| Hit Rate | 94.1% |
| FDR p-value | 0.000** |
| Symbols Tested | 51 |

### Best Performing Symbols
- GE: Sharpe 1.28
- LLY: Sharpe 1.04
- TJX: Sharpe 1.02
- GOOG: Sharpe 1.01
- WMT: Sharpe 0.99

### Sectors with 100% Hit Rate
- Basic Materials
- Communication Services
- Consumer Defensive
- Energy
- Healthcare

---

## Pine Script v6 Implementation

```pine
//@version=6
strategy("52-Week High Strategy (80/70/59)", overlay=true, margin_long=100, margin_short=100,
         default_qty_type=strategy.percent_of_equity, default_qty_value=100,
         commission_type=strategy.commission.percent, commission_value=0.1,
         slippage=1)

// === INPUTS ===
int periodInput = input.int(80, "Period (lookback days)", minval=1)
float entryPctInput = input.float(0.70, "Entry % of high", minval=0.01, maxval=1.0, step=0.01)
float exitPctInput = input.float(0.59, "Exit % of high", minval=0.01, maxval=1.0, step=0.01)

// === INDICATORS ===
float periodHigh = ta.highest(high, periodInput)
float entryThreshold = periodHigh * entryPctInput
float exitThreshold = periodHigh * exitPctInput

// === SIGNALS ===
bool entryCondition = close >= entryThreshold
bool exitCondition = close < exitThreshold

// === STRATEGY EXECUTION ===
// Long-only: enter when near highs, exit when falling away
if entryCondition and strategy.position_size == 0
    strategy.entry("Long", strategy.long)

if exitCondition and strategy.position_size > 0
    strategy.close("Long")

// === PLOTTING ===
plot(periodHigh, "Period High", color=color.blue, linewidth=1)
plot(entryThreshold, "Entry Threshold (70%)", color=color.green, linewidth=1, style=plot.style_stepline)
plot(exitThreshold, "Exit Threshold (59%)", color=color.red, linewidth=1, style=plot.style_stepline)

// Background color when in position
bgcolor(strategy.position_size > 0 ? color.new(color.green, 90) : na)

// Entry/Exit markers
plotshape(entryCondition and strategy.position_size[1] == 0, "Entry", shape.triangleup, location.belowbar, color.green, size=size.small)
plotshape(exitCondition and strategy.position_size[1] > 0, "Exit", shape.triangledown, location.abovebar, color.red, size=size.small)
```

---

## Parity Validation Notes

### Key Implementation Details for TradingView Parity

1. **Fill Model**: TrendLab uses "NextOpen" fill - orders execute on the next bar's open. TradingView strategies also fill on the next bar by default.

2. **Position State**: TrendLab tracks position state to avoid re-entry while already long. The Pine Script uses `strategy.position_size == 0` for the same purpose.

3. **Rolling High Calculation**: `ta.highest(high, period)` includes the current bar. TrendLab's implementation should match this behavior.

4. **Percentage Thresholds**: The entry/exit percentages are multiplied against the period high, not subtracted. 70% means "at least 70% of the high value", not "within 30% of the high".

### Testing Checklist

- [ ] Load on daily chart of GE
- [ ] Backtest period: 2024-03-21 to 2025-12-26
- [ ] Verify entry signals align with TrendLab backtest
- [ ] Verify exit signals align with TrendLab backtest
- [ ] Compare final equity curve shape
- [ ] Check trade count matches

---

## Using This Artifact

### For LLM-Based Pine Generation

You can use this artifact to prompt an LLM to generate or modify Pine Script:

```
Using the attached strategy artifact JSON, generate a Pine Script v6 strategy that:
1. Implements the exact entry/exit logic specified in the rules
2. Uses the indicator definitions provided
3. Matches the fill model (NextOpen) and cost model
4. Includes the parameter values as configurable inputs
```

### For Manual Validation

1. Apply the Pine Script to TradingView on GE daily chart
2. Set date range to match the backtest period
3. Compare trade-by-trade results with TrendLab output
4. Any discrepancies indicate parity issues to investigate

---

## Artifact Files

- `52wk_high_80_70_59.json` - Machine-readable strategy artifact
- `52wk_high_80_70_59.md` - This documentation file
